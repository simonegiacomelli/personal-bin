#!/bin/bash

# Create a directory to store the XML backups
mkdir -p vm_backup

# Loop over all domains (active and inactive)
for domain in $(virsh list --all --name) do
# Export the domain's XML configuration
virsh dumpxml $domain > vm_backup/${domain}.xml
done

echo "All domain configurations have been exported to the vm_backup directory."
